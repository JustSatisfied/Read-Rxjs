1. 任务调度
测试用例 1.1
描述：验证任务是否按照优先级被正确调度。

步骤：

创建多个不同优先级的任务。

验证高优先级任务是否先于低优先级任务执行。

测试用例 1.2
描述：验证任务是否可以被中断和恢复。

步骤：

创建一个长时间运行的任务。

验证任务是否在时间片用尽时被中断，并在后续恢复。

测试用例 1.3
描述：验证任务是否在浏览器空闲时执行。

步骤：

使用 requestIdleCallback 模拟浏览器空闲状态。

验证任务是否在空闲时被执行。

2. 优先级管理
测试用例 2.1
描述：验证不同优先级的任务是否被正确区分。

步骤：

创建多个任务，分别赋予不同的优先级（如 ImmediatePriority、UserBlockingPriority、NormalPriority 等）。

验证任务是否按照优先级顺序执行。

测试用例 2.2
描述：验证优先级是否可以被动态调整。

步骤：

创建一个任务并赋予低优先级。

在任务执行过程中动态提升其优先级。

验证任务是否被重新调度并优先执行。

3. 时间切片（Time Slicing）
测试用例 3.1
描述：验证任务是否被分成小块执行。

步骤：

创建一个长时间运行的任务。

验证任务是否被分成多个小任务执行。

测试用例 3.2
描述：验证任务是否在时间片用尽时被中断。

步骤：

创建一个长时间运行的任务。

验证任务是否在时间片用尽时被中断，并将控制权交还给浏览器。

4. 任务队列
测试用例 4.1
描述：验证任务是否被正确加入队列。

步骤：

创建多个任务并加入队列。

验证任务是否按照优先级被正确排序。

测试用例 4.2
描述：验证任务是否被正确从队列中移除。

步骤：

创建多个任务并加入队列。

执行任务并验证任务是否被正确移除。

5. 错误处理
测试用例 5.1
描述：验证任务执行过程中抛出错误是否被捕获。

步骤：

创建一个会抛出错误的任务。

验证错误是否被捕获并处理，而不会影响其他任务的执行。

测试用例 5.2
描述：验证任务队列是否在错误发生后继续正常工作。

步骤：

创建一个会抛出错误的任务。

验证其他任务是否继续正常执行。

6. 性能测试
测试用例 6.1
描述：验证 Scheduler 在高负载情况下的性能。

步骤：

创建大量任务并加入队列。

验证 Scheduler 是否能够高效调度和执行任务。

测试用例 6.2
描述：验证 Scheduler 在长时间运行情况下的稳定性。

步骤：

创建长时间运行的任务。

验证 Scheduler 是否能够稳定运行，不会出现内存泄漏或性能下降。

7. 与浏览器交互
测试用例 7.1
描述：验证 Scheduler 是否能够正确使用 requestIdleCallback。

步骤：

模拟浏览器空闲状态。

验证任务是否在空闲时被执行。

测试用例 7.2
描述：验证 Scheduler 是否能够正确处理浏览器的主线程阻塞。

步骤：

模拟主线程阻塞的情况。

验证 Scheduler 是否能够正确中断任务并恢复。

8. 边界条件
测试用例 8.1
描述：验证空任务队列的行为。

步骤：

不添加任何任务。

验证 Scheduler 是否能够正确处理空队列。

测试用例 8.2
描述：验证重复添加同一任务的行为。

步骤：

多次添加同一任务到队列。

验证任务是否只被执行一次。

9. API 测试
测试用例 9.1
描述：验证 scheduleCallback API 的正确性。

步骤：

使用 scheduleCallback 添加任务。

验证任务是否被正确调度和执行。

测试用例 9.2
描述：验证 cancelCallback API 的正确性。

步骤：

使用 scheduleCallback 添加任务。

使用 cancelCallback 取消任务。

验证任务是否被正确取消。

10. 集成测试
测试用例 10.1
描述：验证 Scheduler 与 React Reconciler 的集成。

步骤：

模拟 React Reconciler 生成的任务。

验证 Scheduler 是否能够正确调度和执行这些任务。

测试用例 10.2
描述：验证 Scheduler 在 React 应用中的实际表现。

步骤：

在一个简单的 React 应用中使用 Scheduler。

验证任务调度和执行是否符合预期。